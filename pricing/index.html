<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Leave a tip — Unhappy Hiker Photography</title>
    <style>
        :root {
            --bg: #f6f6f5;
            --card: #ffffff;
            --accent: #1279BE
        }

        html,
        body {
            height: 100%;
            margin: 0
        }

        body {
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--bg);
            font-family: Inter, Arial, Helvetica, sans-serif
        }

        .tablet {
            width: min(720px, 92vw);
            aspect-ratio: 1/1;
            background: var(--card);
            box-shadow: 0 10px 30px rgba(0, 0, 0, .12);
            border-radius: 14px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 2rem;
            gap: 1.25rem
        }

        h1 {
            font-size: 2.25rem;
            margin: 0;
            color: #111
        }

        p.lead {
            color: #444;
            margin: .25rem 0 1rem
        }

        .choices {
            display: flex;
            flex-wrap: wrap;
            gap: 1rem;
            justify-content: center;
            width: 100%
        }

        .tip-btn {
            flex: 1 1 30%;
            min-width: 160px;
            height: 96px;
            background: linear-gradient(180deg, var(--accent), #0f5fa3);
            color: #fff;
            border-radius: 12px;
            border: none;
            font-size: 1.75rem;
            font-weight: 700;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer
        }

        .tip-btn[data-selected="true"] {
            outline: 6px solid rgba(18, 121, 190, .12)
        }

        .custom {
            display: flex;
            gap: .5rem;
            align-items: center
        }

        .custom input {
            width: 110px;
            font-size: 1.5rem;
            padding: .5rem;
            border-radius: 8px;
            border: 1px solid #ddd;
            text-align: right
        }

        footer {
            margin-top: .5rem;
            color: #666;
            font-size: .9rem
        }

        @media (max-width:520px) {
            .tip-btn {
                min-width: 120px;
                height: 76px;
                font-size: 1.25rem
            }
        }
    </style>
</head>

<body>
    <main class="tablet" role="main" aria-labelledby="title">
        <h1 id="title">Leave a tip</h1>
        <p class="lead">Tap an amount</p>
        <p class="lead">You pay their wage so we don't have to</p>
        <div class="choices" role="list">
            <button class="tip-btn" data-percent="22">22%</button>
            <button class="tip-btn" data-percent="30">30%</button>
            <button class="tip-btn" data-percent="40">40%</button>
            <div class="custom">
                <label for="customPercent" class="hide-visually">Custom percent</label>
                <input id="customPercent" type="number" min="1" max="100" placeholder="Custom%"
                    aria-label="Custom percent" />
                <button id="customSubmit" type="button"
                    style="margin-left:.5rem;padding:.5rem 1rem;border-radius:8px;border:none;background:var(--accent);color:#fff;font-weight:700;cursor:pointer">Submit</button>
            </div>
        </div>
        <div id="selected" aria-live="polite" style="margin-top:1rem;color:#333;font-weight:600">Selected: —</div>
        <footer> Unhappy Hiker LLC TM Co. Closed-captioning</footer>
    </main>

    <script>
        function initPricingScript() {
            console.log('pricing script init');
            const buttons = document.querySelectorAll('.tip-btn');
            const selected = document.getElementById('selected');
            const custom = document.getElementById('customPercent');
            // Put the URL you want to redirect to when the user types 69 here:
            // Example: const redirect69 = 'https://example.com/your-target';
            const redirect69 = 'https://media.tenor.com/-7n4_-q2bgEAAAAe/emoji-staring-from-the-dark.png';
            // (below-22 redirect removed)
            // Set the URL the highest preset (40%) should redirect to when clicked.
            // Example: const redirectHighest = 'https://example.com/thank-you';
            const redirectHighest = 'https://c.tenor.com/13VLGDumHu8AAAAC/tenor.gif';

            function clearSelected() {
                buttons.forEach(b => b.dataset.selected = 'false');
                selected.style.color = '#333';
            }

            buttons.forEach(b => {
                b.addEventListener('click', () => {
                    clearSelected();
                    const p = parseInt(b.dataset.percent, 10);
                    // First two options: show a notification that selection is too low
                    if (p === 22 || p === 30) {
                        selected.style.color = 'crimson';
                        selected.textContent = 'Selection too low';
                        return;
                    }
                    // Highest preset: redirect to configured URL if set
                    if (p === 40) {
                        if (redirectHighest && redirectHighest.trim().length) {
                            window.location.href = redirectHighest;
                            return;
                        }
                    }
                    b.dataset.selected = 'true';
                    selected.textContent = `Selected: ${b.dataset.percent}`;
                })
            })

            // Update selected display as the user types, but only perform redirects on submit
            custom.addEventListener('input', () => {
                clearSelected();
                const v = custom.value ? custom.value + '%' : '—';
                selected.textContent = `Selected: ${v}`;
            })

            const customSubmit = document.getElementById('customSubmit');
            if (customSubmit && !customSubmit.dataset.orig) customSubmit.dataset.orig = customSubmit.textContent;
            function handleCustomSubmit() {
                console.log('custom submit clicked, value=', custom.value);
                const n = parseInt(custom.value, 10);
                if (Number.isNaN(n)) return;
                // provide immediate feedback
                customSubmit.disabled = true;
                const oldText = customSubmit.textContent;
                customSubmit.textContent = 'Submitting...';
                // perform the same redirect rules, but only when user submits
                if (n === 67) {
                    window.location.href = 'https://rickroll.it/rickroll.mp4';
                    return;
                }
                if (n === 69 || n === 420) {
                    if (redirect69 && redirect69.trim().length) {
                        window.location.href = redirect69;
                        return;
                    }
                }
                if (n === 0) {
                    window.location.href = 'https://c.tenor.com/CwWdbZ03o98AAAAC/tenor.gif';
                    return;
                }
                if (n === 100) {
                    window.location.href = 'https://c.tenor.com/39pkNefFyyYAAAAd/tenor.gif';
                    return;
                }

                // otherwise show a random tipping-culture phrase (no redirect)
                const tippingPhrases = [
                    'Tipping rewards great service and personal attention.',
                    'Tipping helps service workers earn a living wage beyond base pay.',
                    'Tipping encourages friendly, attentive interactions.',
                    'Tipping lets customers directly reward exceptional effort.',
                    'Tipping supports flexible, performance-based income.',
                    'Tipping builds a culture of gratitude and reciprocity.',
                    'Servers rely on tips for stable household income.',
                    'Tipping can boost morale and service quality.',
                    'Tipping creates immediate feedback between guest and host.',
                    'Tipping helps small businesses keep prices competitive.',
                    'Tipping allows for personal appreciation of memorable moments.',
                    'Tipping fills gaps where wages haven’t kept pace.',
                    'Generous tips often drive better long-term care.',
                    'Tipping encourages pride in workmanship and hospitality.',
                    'Tipping lets patrons participate in local economies directly.'
                ];
                const phrase = tippingPhrases[Math.floor(Math.random() * tippingPhrases.length)];
                selected.style.color = '#333';
                selected.textContent = phrase;
                // restore button
                customSubmit.disabled = false;
                customSubmit.textContent = oldText;
            }
            if (customSubmit) customSubmit.addEventListener('click', handleCustomSubmit);
            // submit on Enter
            custom.addEventListener('keydown', (e) => { if (e.key === 'Enter') handleCustomSubmit(); });
        }
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', initPricingScript);
        } else {
            initPricingScript();
        }
        // Reset submit button state when navigating back (bfcache / pageshow)
        window.addEventListener('pageshow', () => {
            const btn = document.getElementById('customSubmit');
            if (!btn) return;
            btn.disabled = false;
            btn.textContent = btn.dataset.orig || 'Submit';
        });
    </script>
</body>

</html>